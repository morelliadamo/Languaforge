<!-- Backdrop -->
<div
  class="fixed inset-0 z-40 backdrop-blur-sm bg-black/30 transition-opacity duration-300"
  [class.opacity-0]="!sidebarOpen"
  [class.pointer-events-none]="!sidebarOpen"
  (click)="closeSidebar()"
></div>

<!-- sidebar -->
<div
  class="sidebar fixed top-0 right-0 h-full w-64 bg-white z-50 shadow-xl flex flex-col p-6 gap-6"
  [style.transform]="sidebarOpen ? 'translateX(0)' : 'translateX(100%)'"
>
  <div class="flex items-center justify-between mb-2">
    <div class="flex items-center gap-2">
      <img src="Languaforge.png" class="h-7" />
      <span class="text-sky-500 font-bold text-lg">LanguaForge</span>
    </div>
    <button
      (click)="closeSidebar()"
      class="text-gray-400 hover:text-gray-700 transition-colors"
      aria-label="Close menu"
    >
      <svg
        class="w-6 h-6"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"
        />
      </svg>
    </button>
  </div>

  <hr class="border-gray-200" />

  @if (!isLoggedIn) {
    <a
      href="/login"
      (click)="closeSidebar()"
      class="text-gray-700 font-semibold hover:text-sky-500 transition-colors duration-200"
    >
      Bejelentkezés
    </a>
    <a
      href="/register"
      (click)="closeSidebar()"
      class="text-center bg-sky-500 text-white rounded-xl px-4 py-3 font-semibold hover:bg-sky-600 transition-colors duration-200"
    >
      Vágj bele
    </a>
  }

  @if (router.getCurrentNavigation()?.finalUrl?.toString() !== "/profile") {
    <button
      [routerLink]="'/profile'"
      class="text-left text-gray-700 font-semibold hover:text-sky-500 transition-colors duration-200 cursor-pointer"
      (click)="closeSidebar()"
    >
      Profil
    </button>
    <hr class="border-gray-200" />
  }

  @if (router.getCurrentNavigation()?.finalUrl?.toString() !== "/courses") {
    <button
      [routerLink]="'/courses'"
      class="text-left text-gray-700 font-semibold hover:text-sky-500 transition-colors duration-200 cursor-pointer"
    >
      Kurzusok
    </button>
    <hr class="border-gray-200" />
  }

  @if (router.getCurrentNavigation()?.finalUrl?.toString() !== "/store") {
    <button
      [routerLink]="'/store'"
      class="text-left text-gray-700 font-semibold hover:text-amber-400 transition-colors duration-200 cursor-pointer"
    >
      Bolt
    </button>
    <hr class="border-gray-200" />
  }

  @if (router.getCurrentNavigation()?.finalUrl?.toString() !== "/store") {
    <button
      [routerLink]="'/dashboard'"
      class="text-left text-gray-700 font-semibold hover:text-sky-500 transition-colors duration-200 cursor-pointer"
    >
      Tanulóközpont
    </button>
    <hr class="border-gray-200" />
  }

  @if (isLoggedIn) {
    <button
      (click)="logout()"
      class="text-left text-gray-700 font-semibold hover:text-red-500 transition-colors duration-200 cursor-pointer"
    >
      Kijelentkezés
    </button>
  }

  <hr class="border-gray-200" />
</div>

<!-- nav -->
<nav
  class="text-white font-bold h-[60px] w-full bg-sky-500 flex items-center justify-between px-6 shadow-sm relative z-30"
>
  <a href="/" class="flex items-center gap-2">
    <img src="Languaforge.png" class="h-8" />
    <span class="font-semibold text-xl tracking-wide">LanguaForge</span>
  </a>

  <!-- hamburger menu -->
  <button
    class="flex flex-col justify-center items-center gap-1.5 w-8 h-8"
    (click)="toggleSidebar()"
    aria-label="Open menu"
  >
    <span
      class="block w-6 h-0.5 bg-white rounded transition-all duration-300"
      [class.rotate-45]="sidebarOpen"
      [class.translate-y-2]="sidebarOpen"
    ></span>
    <span
      class="block w-6 h-0.5 bg-white rounded transition-all duration-300"
      [class.opacity-0]="sidebarOpen"
    ></span>
    <span
      class="block w-6 h-0.5 bg-white rounded transition-all duration-300"
      [class.-rotate-45]="sidebarOpen"
      [class.-translate-y-2]="sidebarOpen"
    ></span>
  </button>
</nav>
